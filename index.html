<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Street View + Map Toggle</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
#app {
  position: relative;
  width: 100%;
  height: 100%;
}
.view {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  transition: all 0.3s ease;
}
.mini {
  width: 200px !important;
  height: 150px !important;
  bottom: 10px;
  right: 10px;
  top: auto !important;
  left: auto !important;
  z-index: 2;
  cursor: pointer;
  border: 2px solid #333;
  border-radius: 8px;
}
iframe {
  width: 100%;
  height: 100%;
  border: none;
}
.hide-infobox {
  position: absolute;
  top: 0; left: 0;
  width: 250px;
  height: 80px;
  background: white;
  z-index: 3;
  pointer-events: none;
}
</style>
</head>
<body>
<div id="app">
  <!-- Street View -->
  <div id="streetview" class="view">
    <div class="hide-infobox"></div>
    <iframe
      src="https://www.google.com/maps/embed?pb=!4v1755759610132!6m8!1m7!1sIu3ycZQFVKnzMgddDJ1WKA!2m2!1d57.73794513390704!2d12.9008980345448!3f94.34701!4f0!5f0.7820865974627469"
      allowfullscreen
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>
  </div>

  <!-- World Map -->
  <div id="map" class="view mini"></div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const streetview = document.getElementById("streetview");
const worldmap = document.getElementById("map");

// Initialize Leaflet
const map = L.map('map', { zoomControl: true }).setView([20,0], 2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// Store map state
let mapState = { center: map.getCenter(), zoom: map.getZoom() };

// Toggle function
function toggleFocus() {
  const streetIsMini = streetview.classList.contains('mini');

  if (streetIsMini) {
    // Make Street View full
    streetview.classList.remove('mini');
    worldmap.classList.add('mini');

    // Store map state and shrink map
    mapState = { center: map.getCenter(), zoom: map.getZoom() };
    map.invalidateSize();
  } else {
    // Make Map full
    worldmap.classList.remove('mini');
    streetview.classList.add('mini');

    // Restore map state and refresh
    map.invalidateSize();
    map.setView(mapState.center, mapState.zoom);
  }
}

// Click handlers
streetview.addEventListener('click', () => {
  if (streetview.classList.contains('mini')) toggleFocus();
});
worldmap.addEventListener('click', () => {
  if (worldmap.classList.contains('mini')) toggleFocus();
});
</script>
</body>
</html>
